## ADR-0003: Stateful Alarms (open/close) with State Tracker

### Контекст
Аварии — это не единичные события, а состояние во времени. Если писать только “срабатывания”, UI и уведомления будут шуметь, а операторам сложно понять текущий статус.

### Решение
- Ввести обработку аварий как **машину состояний**: open → active → close.
- Использовать state tracker для хранения текущих активных аварий/групп (и защиты от флаппинга).
- Писать в журнал только значимые переходы (open/close), а UI держать в актуальном состоянии через WS.

### Последствия
Плюсы:
- меньше шума (нет “дубликатов”),
- корректные периоды активности,
- проще строить отчеты и аналитику.

Минусы:
- сложнее тестирование (нужны сценарии),
- важно корректно обрабатывать восстановление после рестарта и потерю связи.


